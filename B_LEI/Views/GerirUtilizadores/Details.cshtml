@model B_LEI.Models.ApplicationUser

@{
    ViewData["Title"] = "Details";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div>
    <h3>Informações do Usuário</h3>
    <dl class="row">
        <dt class="col-sm-2">Nome:</dt>
        <dd class="col-sm-10">@Model.Name</dd>

        <dt class="col-sm-2">Email:</dt>
        <dd class="col-sm-10">@Model.Email</dd>

        <dt class="col-sm-2">Morada:</dt>
        <dd class="col-sm-10">@Model.Morada</dd>

        <dt class="col-sm-2">Data de Criação:</dt>
        <dd class="col-sm-10">@Model.DataCriada</dd>

        <dt class="col-sm-2">Bloqueado:</dt>
        <dd class="col-sm-10">
            @if (Model.LockoutEnd != null && Model.LockoutEnd > DateTimeOffset.Now)
            {
                <span class="text-danger">Sim</span>
                <p><strong>Motivo do bloqueio:</strong> @Model.LockoutReason</p>
            }
            else
            {
                <span class="text-success">Não</span>
            }
        </dd>
    </dl>
</div>

<!-- Formulário de Bloqueio -->
<div>
    @if (Model.LockoutEnd == null || Model.LockoutEnd <= DateTimeOffset.Now)
    {
        <form method="post" action="@Url.Action("Bloquear", "GerirUtilizadores", new { id = Model.Id })">
            <div class="form-group">
                <label for="motivo">Motivo do Bloqueio</label>
                <textarea id="motivo" name="motivo" class="form-control" required></textarea>
            </div>
            <button type="submit" class="btn btn-danger">Bloquear Usuário</button>
        </form>
    }
    else
    {
        <a href="@Url.Action("Desbloquear", "GerirUtilizadores", new { id = Model.Id })" class="btn btn-success">
            Desbloquear Usuário
        </a>
    }
</div>

<div>
    <a href="@Url.Action("Index", "GerirUtilizadores")" class="btn btn-secondary">Voltar para a lista</a>
</div>

